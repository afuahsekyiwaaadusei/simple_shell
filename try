#include <unistd.h>
#include <stdio.h>
#include "main.h"


int main(void)
{
	char *line = NULL, *dup_str, **argv;
	size_t n = 0;
	ssize_t nread;
	
	nread = getline(&line, &n, stdin);
	if (line[nread - 1] == '\n')
                        line[nread - 1] = '\0';
	printf("%ld\n", nread);
	fflush(stdout);
	dup_str = str_dup(line);
	printf("dup_str is %s\n", dup_str);
	fflush(stdout);
	argv = _argv(dup_str);
	printf("seg fault not caused by argv\n");
	fflush(stdout);
	if (execve(argv[0], argv, NULL) == -1)
		perror(argv[0]);
}
